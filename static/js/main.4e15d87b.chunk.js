(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{21:function(e,t,s){},28:function(e,t,s){},33:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s(22),a=s.n(c),o=(s(28),s(4)),r=s(2),i=s(17),l="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var h={Accept:"application/json",Authorization:d},j=(s(21),s(3));var b=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"list-books-title",children:Object(j.jsx)("h1",{children:"MyReads"})})})},u=s(8);var f=function(e){var t=e.bok,s=e.shelfUpdater,n=t.imageLinks?t.imageLinks.thumbnail:"https://books.google.com/googlebooks/images/no_cover_thumb.gif";return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"book",children:[Object(j.jsxs)("div",{className:"book-top",children:[Object(j.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(n,'")')}}),Object(j.jsx)("div",{className:"book-shelf-changer",children:Object(j.jsxs)("select",{onChange:function(e){var n=e.target.value;s(t,n)},value:t.shelf,children:[Object(j.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(j.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(j.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(j.jsx)("option",{value:"read",children:"Read"}),Object(j.jsx)("option",{value:"none",children:"None"})]})})]}),Object(j.jsx)("div",{className:"book-title",children:t.title}),Object(j.jsx)("div",{className:"book-authors",children:t.authors?t.authors[0]:"Auther name not found"})]})})};var O=function(e){var t=e.shelfTitle,s=e.boks,n=e.cat,c=e.shelfUpdater,a=s.filter((function(e){return e.shelf===n}));return Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h2",{className:"bookshelf-title",children:t}),Object(j.jsx)("div",{className:"bookshelf-books",children:Object(j.jsx)("ol",{className:"books-grid",children:a.map((function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(f,{bok:e,shelfUpdater:c})},e.id)}))})})]})};var v=function(e){var t=e.boks,s=e.shelfUpdater;return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"list-books",children:[Object(j.jsx)(b,{}),Object(j.jsx)("div",{className:"list-books-content",children:Object(j.jsxs)("div",{children:[Object(j.jsx)(O,{shelfTitle:"Currently Reading",boks:t,cat:"currentlyReading",shelfUpdater:s}),Object(j.jsx)(O,{shelfTitle:"Want to read",boks:t,cat:"wantToRead",shelfUpdater:s}),Object(j.jsx)(O,{shelfTitle:"Read",boks:t,cat:"read",shelfUpdater:s})]})}),Object(j.jsx)("div",{className:"open-search",children:Object(j.jsx)(u.b,{className:"opn-search",to:"/search",children:"Logo"})})]})})},x=s(23),p=s.n(x);var m=function(e){var t=e.boks,s=e.shelfUpdater,c=Object(n.useState)([]),a=Object(o.a)(c,2),r=a[0],d=a[1];return Object(j.jsxs)("div",{className:"search-books",children:[Object(j.jsxs)("div",{className:"search-books-bar",children:[Object(j.jsx)(u.b,{className:"close-search",to:"/",children:"Close"}),Object(j.jsx)("div",{className:"search-books-input-wrapper",children:Object(j.jsx)(p.a,{minLength:2,onChange:function(e){var s,n,c=e.target.value;0!==c.length?(s=c,n=30,fetch("".concat(l,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:s,maxResults:n})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){if(e&&!e.error){var s=e.map((function(e){var s=t.find((function(t){return t.id===e.id}));return e.shelf=s?s.shelf:"none",e}));d(s)}else d([])})):d([])},debounceTimeout:150,element:"input",type:"text",placeholder:"Search by title or author"})})]}),Object(j.jsx)("div",{className:"search-books-results",children:Object(j.jsx)("ol",{className:"books-grid",children:r.map((function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(f,{bok:e,shelfUpdater:s})},e.id)}))})})]})};var k=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),s=t[0],c=t[1];Object(n.useEffect)((function(){fetch("".concat(l,"/books"),{headers:h}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){c(e),console.log(e)}))}),[]);var a=function(e,t){e.shelf=t,c((function(t){return t.filter((function(t){return t.id!==e.id})).concat([e])})),function(e,t){fetch("".concat(l,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t)};return Object(j.jsx)("div",{className:"app",children:Object(j.jsxs)(r.c,{children:[Object(j.jsx)(r.a,{path:"/search",element:Object(j.jsx)(m,{boks:s,shelfUpdater:a})}),Object(j.jsx)(r.a,{path:"/",exact:!0,element:Object(j.jsx)(v,{boks:s,shelfUpdater:a})})]})})};a.a.render(Object(j.jsx)(u.a,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.4e15d87b.chunk.js.map